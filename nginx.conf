location ~ /public/ {
}

location / {
  if (!-e $request_filename){
    rewrite ^(.*)$ /public/$1;
  }
  rewrite ^/(/)?$ /public/index.php break;
}